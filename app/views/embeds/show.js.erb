function registerClick(widget) {
  var xmlhttp = new XMLHttpRequest();
  widgetID = "widget_id=" + widget.getAttribute('data-id');
  alert(widgetID);
  xmlhttp.open("POST", "http://localhost:3000/clicks", false);
  xmlhttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');

  xmlhttp.send(widgetID);
}
document.write("<%= escape_javascript(render(:partial => "embeds/widget_css", :locals => {:widget => @widget})).html_safe %>");
document.write("<%= escape_javascript(render(:partial => "templates/widget_#{@widget.size}", :locals => {:widget => @widget})).html_safe %>");
var widget = document.getElementsByClassName("dc-donate")[0];
widget.addEventListener("click", function() {registerClick(widget)}, false);